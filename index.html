<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TheRig - Майнкрафт риг для Blender</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Стили здесь остаются без изменений -->
</head>

<body>
  <div class="container">
    <!-- Навигация и секция рига -->
    <header>...</header>
    <main>
      <section id="main" class="rig-section">...</section>

      <section id="works" class="works-section">
        <h2>Работы в которых использовался риг</h2>
        <div class="works-grid" id="worksGrid"></div>
        <a href="https://github.com/TheRatmir/TheRig/issues/new?template=render_submission.yml" class="suggest-work-btn">＋ Предложить свою работу</a>
      </section>
    </main>
  </div>

  <!-- Кнопка создателя -->
  <a href="https://theratmir.github.io/TheRatmir-Portfolio/" class="creator-btn" target="_blank">
    <img src="TheRatmir.webp" alt="TheRatmir" class="creator-avatar">
    <span class="creator-text">Создатель рига</span>
  </a>

  <!-- Модалка галереи -->
  <div class="modal" id="galleryModal">
    <div class="modal-content" id="modalContent">
      <div class="modal-image-container">
        <img class="modal-image" id="modalImage" alt="Работа">
      </div>
      <div class="author-info" id="authorInfo">
        Автор: <a href="#" class="author-link" id="authorLink">Имя автора</a>
      </div>
      <div class="modal-controls">
        <button class="modal-btn" id="prevBtn"><i class="fas fa-arrow-left"></i> Предыдущая</button>
        <button class="close-btn" id="closeModalBtn"><i class="fas fa-times"></i> Закрыть</button>
        <button class="modal-btn" id="nextBtn">Следующая <i class="fas fa-arrow-right"></i></button>
      </div>
    </div>
  </div>

  <script>
    const worksData = [
      { image: "Images/musictimespirit 21_9 tg.webp", author: "Dialm", authorLink: "https://t.me/dialmtg" },
      { image: "Images/Manul s dr.webp", author: "TheRatmir", authorLink: "https://www.youtube.com/@TheRatmir42" },
      { image: "Images/instyleslove0001.webp", author: "uertyk_", authorLink: "https://t.me/uertykk" },
      { image: "Images/thelastlove0001.webp", author: "uertyk_", authorLink: "https://t.me/uertykk" },
      { image: "Images/430724243-942ef56b-44be-4c08-bc19-06c9a103bf94.webp", author: "Дикабрасс", authorLink: "https://t.me/deecabrassik" }
    ];

    const worksGrid = document.getElementById('worksGrid');
    const galleryModal = document.getElementById('galleryModal');
    const modalImage = document.getElementById('modalImage');
    const authorLink = document.getElementById('authorLink');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const modalContent = document.getElementById('modalContent');

    let currentWorkIndex = 0;

    worksData.forEach((work, index) => {
      const workItem = document.createElement('div');
      workItem.className = 'work-item';
      workItem.innerHTML = `<img src="${work.image}" alt="Работа ${index + 1}">`;
      workItem.addEventListener('click', () => openModal(index));
      worksGrid.appendChild(workItem);
    });

    function openModal(index) {
      currentWorkIndex = index;
      updateModal();
      galleryModal.style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function updateModal() {
      const work = worksData[currentWorkIndex];
      modalImage.src = work.image;
      authorLink.textContent = work.author;
      authorLink.href = work.authorLink;
    }

    function closeModal() {
      galleryModal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function showPrev() {
      currentWorkIndex = (currentWorkIndex - 1 + worksData.length) % worksData.length;
      updateModal();
    }

    function showNext() {
      currentWorkIndex = (currentWorkIndex + 1) % worksData.length;
      updateModal();
    }

    prevBtn.addEventListener('click', showPrev);
    nextBtn.addEventListener('click', showNext);
    closeModalBtn.addEventListener('click', closeModal);

    galleryModal.addEventListener('click', e => { if (e.target === galleryModal) closeModal(); });
    modalContent.addEventListener('click', e => e.stopPropagation());
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

    document.getElementById('downloadBtn').addEventListener('click', () => {
      window.location.href = 'https://github.com/TheRatmir/TheRig/releases/tag/Rig';
    });

    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        targetSection.scrollIntoView({ behavior: 'smooth' });

        document.querySelectorAll('nav a').forEach(navLink => navLink.classList.remove('active'));
        this.classList.add('active');
      });
    });

    window.addEventListener('scroll', () => {
      const scrollPosition = window.scrollY;
      document.querySelectorAll('section').forEach(section => {
        const top = section.offsetTop - 100;
        const bottom = top + section.offsetHeight;
        const id = section.getAttribute('id');
        if (scrollPosition >= top && scrollPosition < bottom) {
          document.querySelectorAll('nav a').forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${id}`) {
              link.classList.add('active');
            }
          });
        }
      });
    });
  </script>
</body>

</html>
